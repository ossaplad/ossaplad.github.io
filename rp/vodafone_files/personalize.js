/*!
 * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an
 * unpublished, proprietary work which is fully protected under
 * copyright law. This code may only be used pursuant to a valid
 * license from 24/7 Customer, Inc.
 */
typeof SN=="undefined"&&(SN={}),SN.Personalization=function(){function b(a){try{if(a&&a.url){var b=document.createElement("script");b.id=a.id||"tfs_"+(new Date).getTime(),b.src=a.url;var c=document.getElementsByTagName("script");c&&c.length>0&&c[0].parentNode.insertBefore(b,c[0])}}catch(d){}}function g(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return null}var a=function(a){e(a);try{var b=document.getElementById("sn_iframe").contentWindow,c=0;b.SN.EventManager.observe(b.SN.Constants.CONST_PERIODICAL_EXECUTION_TIMER_EVENT,function(b){c=="1"&&e(a),c++})}catch(d){}},c=function(a){var b="",c={as:"sn.vi",rt:"sn.rn",rv:"sn.rn",tp:"sn.as",vg:"sn.as",ti:"sn.as"},d=c[a];if(localStorage.getItem(d)!=null){var e=localStorage.getItem(d).split("~"),f=a+"||";for(var g=0;g<e.length;g++){var h=e[g];h.indexOf(f)==0&&(b=h.substring(f.length,h.length))}}return b},d=function(a,b){var c=unescape(g(a));if(b==null)return c;if(c==null)return null;var d=c.split("~"),e=b+"||";for(var f=0;f<d.length;f++){var h=d[f];if(h.indexOf(e)==0){var i=h.substring(e.length,h.length);return i}}return null},e=function(a){try{var e=_tfsl&&typeof _tfsl!==undefined&&_tfsl.j("sn.tfsenv")?"stg":"prod";if(f()){var g=c("as")||d("sn.vi","as"),h=c("tp")||d("sn.as","tp"),i=c("vg")||d("sn.as","vg"),j=c("rt")||d("sn.rn","rt"),k=c("rv")||d("sn.rn","rv"),l=c("ti")||d("sn.as","ti");if(_tfsl&&typeof _tfsl!==undefined&&_tfsl.j("sn.tfs_pzn_env"))var m="//interact-api-stage.px.247inc.net/api/v6/"+a+"/getSegment";else var m="//interact-api.px.247inc.net/api/v6/"+a+"/getSegment";m=m+"?env="+e+"&callback=SN.Personalization.getSegment&as="+g+"&tp="+h+"&vg="+i+"&vi="+f()+"&rt="+j+"&rv="+k+"&ti="+l+"&bsid="+f()+"-1",b({url:m,id:"getSegment"})}}catch(n){}},f=function(){var a="";if(g("sn.vi")!=null){var b=g("sn.vi").split("~"),c="vi||";for(var d=0;d<b.length;d++){var e=b[d];e.indexOf(c)==0&&(a=e.substring(c.length,e.length))}}return a};return{init:a}}()